<!DOCTYPE html>
<html>
<head>
    <title>Temporal Trip Patterns</title>
    <meta charset="utf-8">
    <!-- Core React -->
    <script src="https://unpkg.com/react@17.0.2/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17.0.2/umd/react-dom.development.js"></script>
    <!-- Recharts Dependencies -->
    <script src="https://unpkg.com/prop-types@15.8.1/prop-types.min.js"></script>
    <script src="https://unpkg.com/recharts@2.10.3/umd/Recharts.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone@7.23.6/babel.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
            background: #111;
            color: #fff;
        }
        .card {
            background: #1a1a1a;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-width: 900px;
            margin: 0 auto;
        }
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            font-size: 0.85em;
        }
        .legend-color {
            width: 12px;
            height: 12px;
            margin-right: 4px;
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } = Recharts;
        
        const temporalData = [{"hour": "00:00", "Ben-Gurion-University": 0.0, "Soroka-Medical-Center": 0.0163246492601, "Gav-Yam-High-Tech-Park": 0.0, "Beer-Sheva-Comparisons": 0.06504176773537}, {"hour": "01:00", "Ben-Gurion-University": 0.005669737774627924, "Soroka-Medical-Center": 0.11427254482075999, "Gav-Yam-High-Tech-Park": 0.0, "Beer-Sheva-Comparisons": 0.011669959774772204}, {"hour": "02:00", "Ben-Gurion-University": 0.0, "Soroka-Medical-Center": 0.14019992893976, "Gav-Yam-High-Tech-Park": 0.0, "Beer-Sheva-Comparisons": 0.015070869453474443}, {"hour": "03:00", "Ben-Gurion-University": 0.0, "Soroka-Medical-Center": 0.11235199784897999, "Gav-Yam-High-Tech-Park": 0.0, "Beer-Sheva-Comparisons": 0.004319557699197777}, {"hour": "04:00", "Ben-Gurion-University": 0.01417434443656, "Soroka-Medical-Center": 0.1277163736232, "Gav-Yam-High-Tech-Park": 0.06923929098966, "Beer-Sheva-Comparisons": 0.0446743403861611}, {"hour": "05:00", "Ben-Gurion-University": 0.46397354122371004, "Soroka-Medical-Center": 0.39467240270028, "Gav-Yam-High-Tech-Park": 0.66931314623338, "Beer-Sheva-Comparisons": 0.18803358375443557}, {"hour": "06:00", "Ben-Gurion-University": 0.65485471296952, "Soroka-Medical-Center": 3.64999951986325, "Gav-Yam-High-Tech-Park": 2.43722304283604, "Beer-Sheva-Comparisons": 1.6539267424555189}, {"hour": "07:00", "Ben-Gurion-University": 5.20481927710843, "Soroka-Medical-Center": 15.43927710611982, "Gav-Yam-High-Tech-Park": 9.08419497784342, "Beer-Sheva-Comparisons": 5.42392647567122}, {"hour": "08:00", "Ben-Gurion-University": 17.734939759036138, "Soroka-Medical-Center": 14.774767853884779, "Gav-Yam-High-Tech-Park": 19.46085672082717, "Beer-Sheva-Comparisons": 9.20577966302107}, {"hour": "09:00", "Ben-Gurion-University": 16.64068036853295, "Soroka-Medical-Center": 9.71124576279324, "Gav-Yam-High-Tech-Park": 12.36152141802068, "Beer-Sheva-Comparisons": 8.525460026207911}, {"hour": "10:00", "Ben-Gurion-University": 12.469643278998339, "Soroka-Medical-Center": 7.428675686835611, "Gav-Yam-High-Tech-Park": 6.896233382570161, "Beer-Sheva-Comparisons": 8.30403639726282}, {"hour": "11:00", "Ben-Gurion-University": 8.63406567446255, "Soroka-Medical-Center": 6.967744413608989, "Gav-Yam-High-Tech-Park": 3.2957902511078196, "Beer-Sheva-Comparisons": 7.285113979729411}, {"hour": "12:00", "Ben-Gurion-University": 8.25230333097094, "Soroka-Medical-Center": 5.17971518288408, "Gav-Yam-High-Tech-Park": 3.6373707533234803, "Beer-Sheva-Comparisons": 6.463224720849525}, {"hour": "13:00", "Ben-Gurion-University": 7.57949444838176, "Soroka-Medical-Center": 5.4351479301305, "Gav-Yam-High-Tech-Park": 3.69276218611521, "Beer-Sheva-Comparisons": 6.897673813764832}, {"hour": "14:00", "Ben-Gurion-University": 6.21497755728797, "Soroka-Medical-Center": 6.0526037815569795, "Gav-Yam-High-Tech-Park": 3.2080871491875897, "Beer-Sheva-Comparisons": 6.035749906412028}, {"hour": "15:00", "Ben-Gurion-University": 3.52941176470588, "Soroka-Medical-Center": 3.9448034800311103, "Gav-Yam-High-Tech-Park": 3.93740768094534, "Beer-Sheva-Comparisons": 6.142483653036597}, {"hour": "16:00", "Ben-Gurion-University": 4.24568863690054, "Soroka-Medical-Center": 4.2184814235094095, "Gav-Yam-High-Tech-Park": 6.52695716395864, "Beer-Sheva-Comparisons": 6.9099461890511735}, {"hour": "17:00", "Ben-Gurion-University": 2.99551145759508, "Soroka-Medical-Center": 3.60006529859704, "Gav-Yam-High-Tech-Park": 7.38552437223042, "Beer-Sheva-Comparisons": 8.729708570388867}, {"hour": "18:00", "Ben-Gurion-University": 2.63737302149775, "Soroka-Medical-Center": 3.34943391878006, "Gav-Yam-High-Tech-Park": 4.47747415066469, "Beer-Sheva-Comparisons": 6.377988633962267}, {"hour": "19:00", "Ben-Gurion-University": 1.6791873375856299, "Soroka-Medical-Center": 3.83149120869623, "Gav-Yam-High-Tech-Park": 3.83585672082717, "Beer-Sheva-Comparisons": 5.365199393819041}, {"hour": "20:00", "Ben-Gurion-University": 0.6076068981809499, "Soroka-Medical-Center": 2.2335961281773, "Gav-Yam-High-Tech-Park": 4.14050960118168, "Beer-Sheva-Comparisons": 3.641020485018989}, {"hour": "21:00", "Ben-Gurion-University": 0.26553271911174, "Soroka-Medical-Center": 0.9602734858887799, "Gav-Yam-High-Tech-Park": 3.60505908419497, "Beer-Sheva-Comparisons": 1.6813709914251456}, {"hour": "22:00", "Ben-Gurion-University": 0.0822111977321, "Soroka-Medical-Center": 1.9551168172695501, "Gav-Yam-High-Tech-Park": 0.6923929098966, "Beer-Sheva-Comparisons": 0.7689702548120609}, {"hour": "23:00", "Ben-Gurion-University": 0.08788093550673, "Soroka-Medical-Center": 0.36202310418007, "Gav-Yam-High-Tech-Park": 0.5862259970457899, "Beer-Sheva-Comparisons": 0.25961002430802776}];
        
        const poiColors = {
            'Ben-Gurion-University': '#FF6B6B',
            'Soroka-Medical-Center': '#4ECDC4',
            'Gav-Yam-High-Tech-Park': '#FFE66D',
            'Beer-Sheva-Comparisons': '#96CEB4'
        };

        const CustomTooltip = ({ active, payload, label }) => {
            if (active && payload && payload.length) {
                return (
                    <div style={{
                        background: '#1a1a1a',
                        border: '1px solid #333',
                        padding: '8px',
                        fontSize: '0.85em'
                    }}>
                        <p style={{ margin: '0 0 5px' }}><strong>{label}</strong></p>
                        {payload.map((entry, index) => (
                            <p key={index} style={{ 
                                margin: '2px 0',
                                color: entry.color
                            }}>
                                {entry.name.replace(/-/g, ' ')}: {entry.value.toFixed(1)}%
                            </p>
                        ))}
                    </div>
                );
            }
            return null;
        };

        const App = () => {
            return (
                <div className="card">
                    <h2 style={{ textAlign: 'center', marginBottom: '20px' }}>
                        Temporal Trip Patterns
                    </h2>
                    <ResponsiveContainer width="100%" height={400}>
                        <LineChart
                            data={temporalData}
                            margin={{
                                top: 5,
                                right: 30,
                                left: 20,
                                bottom: 45  // Increased bottom margin further
                            }}
                        >
                            <CartesianGrid strokeDasharray="3 3" stroke="#333" />
                            <XAxis 
                                dataKey="hour"
                                stroke="#fff"
                                tick={{ fill: '#fff' }}
                                label={{
                                    value: 'Hour of Day',
                                    position: 'bottom',
                                    fill: '#fff',
                                    offset: 10  // Increased offset from x-axis
                                }}
                            />
                            <YAxis
                                stroke="#fff"
                                tick={{ fill: '#fff' }}
                                label={{
                                    value: 'Trip Distribution (%)',
                                    angle: -90,
                                    position: 'insideLeft',
                                    fill: '#fff',
                                    offset: 0
                                }}
                            />
                            <Tooltip content={<CustomTooltip />} />
                            {Object.entries(poiColors).map(([poi, color]) => (
                                <Line
                                    key={poi}
                                    type="monotone"
                                    dataKey={poi}
                                    stroke={color}
                                    strokeWidth={2}
                                    dot={false}
                                />
                            ))}
                        </LineChart>
                    </ResponsiveContainer>
                    <div className="legend">
                        {Object.entries(poiColors).map(([poi, color]) => (
                            <div key={poi} className="legend-item">
                                <div className="legend-color" style={{ background: color }} />
                                <span>{poi.replace(/-/g, ' ')}</span>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>